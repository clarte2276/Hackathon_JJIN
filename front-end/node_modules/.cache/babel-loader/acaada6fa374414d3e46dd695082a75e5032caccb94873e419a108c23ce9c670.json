{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate,useLocation}from\"react-router-dom\";import\"../../suggest/CRUD/CRUD.css\";import axios from\"axios\";import CRUDHeader from\"./CRUDHeader\";import NavbarTop from\"../../navbar/NavbarTop\";import Footer from\"../../Footer\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function CreateNotice(){const navigate=useNavigate();const[board,setBoard]=useState({title:\"\",body:\"\"});const[file,setFile]=useState(null);const{title,body}=board;const onChange=event=>{const{value,name}=event.target;setBoard({...board,[name]:value});};const onFileChange=event=>{setFile(event.target.files[0]);};const saveBoard=async event=>{event.preventDefault();const formData=new FormData();formData.append(\"file\",file);formData.append(\"title\",title);formData.append(\"content\",body);formData.append(\"created_date\",new Date().toISOString());try{const response=await axios.post(\"/notice/process/new_Post\",formData,{withCredentials:true,headers:{\"Content-Type\":\"multipart/form-data\"}});const newPostId=response.data.no;alert(\"등록되었습니다.\");navigate(\"/notice/PostView/\".concat(newPostId),{state:{newPost:response.data}});}catch(error){console.error(\"Error saving post:\",error);alert(\"글을 저장하는 도중 오류가 발생했습니다.\");}};const backToList=()=>{navigate(\"/notice\");};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavbarTop,{}),/*#__PURE__*/_jsx(\"div\",{className:\"Create_all\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"header_layout\",children:/*#__PURE__*/_jsx(CRUDHeader,{title:\"\\uAC74\\uC758\\uC0AC\\uD56D \\uAE00\\uC4F0\\uAE30\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:saveBoard,children:[/*#__PURE__*/_jsx(\"div\",{className:\"titleBody_layout\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"titleBody_name\",children:\"\\uC81C\\uBAA9\"})}),/*#__PURE__*/_jsx(\"input\",{className:\"titleInput\",type:\"text\",name:\"title\",placeholder:\"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",value:title,onChange:onChange})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"titleBody_layout\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"titleBody_name\",children:\"\\uB0B4\\uC6A9\"})}),/*#__PURE__*/_jsx(\"textarea\",{className:\"BodyInput\",name:\"body\",placeholder:\"\\uB0B4\\uC6A9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",value:body,onChange:onChange})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"titleBody_layout\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"titleBody_name\",children:\"\\uC0AC\\uC9C4 \\uC5C5\\uB85C\\uB4DC\"})}),/*#__PURE__*/_jsx(\"input\",{className:\"imgUp\",type:\"file\",onChange:onFileChange})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn_layout\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"backBtn\",type:\"button\",onClick:backToList,children:\"\\uCDE8\\uC18C\"}),/*#__PURE__*/_jsx(\"input\",{className:\"CreateBtn\",type:\"submit\",value:\"\\uB4F1\\uB85D\\uD558\\uAE30\"})]})]})]})}),/*#__PURE__*/_jsx(Footer,{})]});}export default CreateNotice;","map":{"version":3,"names":["React","useState","useNavigate","useLocation","axios","CRUDHeader","NavbarTop","Footer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CreateNotice","navigate","board","setBoard","title","body","file","setFile","onChange","event","value","name","target","onFileChange","files","saveBoard","preventDefault","formData","FormData","append","Date","toISOString","response","post","withCredentials","headers","newPostId","data","no","alert","concat","state","newPost","error","console","backToList","children","className","onSubmit","type","placeholder","onClick"],"sources":["C:/Users/가연/Desktop/Hackathon_real/Hackathon_JJIN/front-end/src/components/notice/CRUD/CreateNotice.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport \"../../suggest/CRUD/CRUD.css\";\r\nimport axios from \"axios\";\r\nimport CRUDHeader from \"./CRUDHeader\";\r\nimport NavbarTop from \"../../navbar/NavbarTop\";\r\nimport Footer from \"../../Footer\";\r\n\r\nfunction CreateNotice() {\r\n  const navigate = useNavigate();\r\n\r\n  const [board, setBoard] = useState({\r\n    title: \"\",\r\n    body: \"\",\r\n  });\r\n  const [file, setFile] = useState(null);\r\n\r\n  const { title, body } = board;\r\n\r\n  const onChange = (event) => {\r\n    const { value, name } = event.target;\r\n    setBoard({\r\n      ...board,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const onFileChange = (event) => {\r\n    setFile(event.target.files[0]);\r\n  };\r\n\r\n  const saveBoard = async (event) => {\r\n    event.preventDefault();\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"file\", file);\r\n    formData.append(\"title\", title);\r\n    formData.append(\"content\", body);\r\n    formData.append(\"created_date\", new Date().toISOString());\r\n\r\n    try {\r\n      const response = await axios.post(`/notice/process/new_Post`, formData, {\r\n        withCredentials: true,\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      });\r\n      const newPostId = response.data.no;\r\n      alert(\"등록되었습니다.\");\r\n      navigate(`/notice/PostView/${newPostId}`, {\r\n        state: { newPost: response.data },\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error saving post:\", error);\r\n      alert(\"글을 저장하는 도중 오류가 발생했습니다.\");\r\n    }\r\n  };\r\n\r\n  const backToList = () => {\r\n    navigate(\"/notice\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <NavbarTop />\r\n      <div className=\"Create_all\">\r\n        <div>\r\n          <div className=\"header_layout\">\r\n            <CRUDHeader title=\"건의사항 글쓰기\" />\r\n          </div>\r\n          <form onSubmit={saveBoard}>\r\n            <div className=\"titleBody_layout\">\r\n              <div>\r\n                <p>\r\n                  <span className=\"titleBody_name\">제목</span>\r\n                </p>\r\n                <input\r\n                  className=\"titleInput\"\r\n                  type=\"text\"\r\n                  name=\"title\"\r\n                  placeholder=\"제목을 입력하세요\"\r\n                  value={title}\r\n                  onChange={onChange}\r\n                />\r\n              </div>\r\n            </div>\r\n            <br />\r\n            <div className=\"titleBody_layout\">\r\n              <div>\r\n                <p>\r\n                  <span className=\"titleBody_name\">내용</span>\r\n                </p>\r\n                <textarea\r\n                  className=\"BodyInput\"\r\n                  name=\"body\"\r\n                  placeholder=\"내용을 입력하세요\"\r\n                  value={body}\r\n                  onChange={onChange}\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n            <br />\r\n            <div className=\"titleBody_layout\">\r\n              <div>\r\n                <p>\r\n                  <span className=\"titleBody_name\">사진 업로드</span>\r\n                </p>\r\n                <input className=\"imgUp\" type=\"file\" onChange={onFileChange} />\r\n              </div>\r\n            </div>\r\n            <br />\r\n            <div className=\"btn_layout\">\r\n              <button className=\"backBtn\" type=\"button\" onClick={backToList}>\r\n                취소\r\n              </button>\r\n              <input\r\n                className=\"CreateBtn\"\r\n                type=\"submit\"\r\n                value=\"등록하기\"\r\n              ></input>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n      <Footer />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default CreateNotice;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}