{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useLocation}from'react-router-dom';import axios from'axios';import TitleBody from'../notice/element/TitleBody.js';import List from'../notice/element/List.js';import ColumnList from'../notice/element/ColumnList.js';import RowList from'../notice/element/RowList.js';import CreateButton from'../notice/element/CreateButton.js';import PaginationCustom from'../notice/element/PaginationCustom.js';import NavbarTop from'../navbar/NavbarTop.js';import Footer from'../Footer.js';import searchicon from'../images/searchicon.png';import'./Suggest.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Suggest=()=>{const[dataList,setDataList]=useState([]);const[currentPage,setCurrentPage]=useState(1);const[searchKeyword,setSearchKeyword]=useState('');const postsPerPage=10;const location=useLocation();const fetchData=async function(){let keyword=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';try{const endpoint=keyword?\"/suggest/search?keyword=\".concat(encodeURIComponent(keyword)):'/suggest';const response=await axios.get(endpoint);console.log('응답 데이터:',response.data);setDataList(response.data);}catch(error){console.error('There was an error fetching the posts!',error);}};useEffect(()=>{fetchData();},[]);useEffect(()=>{if(location.state&&location.state.newPost){console.log('새 게시글 추가:',location.state.newPost);setDataList(prevDataList=>[location.state.newPost,...prevDataList]);}},[location.state]);const getNextNo=()=>{return dataList.length>0?Math.max(...dataList.map(post=>post.no))+1:1;};const indexOfLastPost=currentPage*postsPerPage;const indexOfFirstPost=indexOfLastPost-postsPerPage;const currentPosts=dataList.slice(indexOfFirstPost,indexOfLastPost);const handlePageChange=pageNumber=>{setCurrentPage(pageNumber);};const handleSearch=e=>{e.preventDefault();fetchData(searchKeyword);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavbarTop,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"SuggestAll_layout\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"SuggestTop_layout\",children:[/*#__PURE__*/_jsx(TitleBody,{title:\"\\uAC74\\uC758\\uC0AC\\uD56D\",body1:\"\\uBCF8 \\uAC8C\\uC2DC\\uD310\\uC740 \\uB3D9\\uAD6D\\uB300\\uD559\\uAD50 \\uD559\\uC0DD\\uB4E4\\uC758 \\uB9CC\\uC871\\uC2A4\\uB7EC\\uC6B4 \\uD559\\uAD50\\uC0DD\\uD65C\\uC744 \\uC704\\uD574 \\uC801\\uADF9 \\uBC18\\uC601\\uB420 \\uC608\\uC815\\uC785\\uB2C8\\uB2E4.\",body2:\"\\uB3D9\\uAD6D\\uB300\\uD559\\uAD50 \\uD559\\uC0DD \\uC5EC\\uB7EC\\uBD84\\uB4E4\\uC758 \\uC790\\uC720\\uB86D\\uACE0 \\uB2E4\\uC591\\uD55C \\uC758\\uACAC\\uC744 \\uAE30\\uB2E4\\uB9BD\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"graynotice\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"graynotice1\",children:\"*\\uC695\\uC124 \\uBC0F \\uBE44\\uC18D\\uC5B4\\uB97C \\uC0AC\\uC6A9\\uD55C \\uAC8C\\uC2DC\\uBB3C\\uC740 \\uAD00\\uB9AC\\uC790\\uC5D0 \\uC758\\uD574 \\uC0AD\\uC81C\\uB420 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"graynotice2\",children:[\"*\\uD5C8\\uC704 \\uC0AC\\uC2E4\\uC774\\uB098 \\uD0C0\\uC778\\uC758 \\uBA85\\uC608\\uB97C \\uD6FC\\uC190\\uD558\\uB294 \\uB0B4\\uC6A9\\uC774 \\uD3EC\\uD568\\uB41C \\uAC8C\\uC2DC\\uBB3C\\uC740 \\uAD00\\uB9AC\\uC790\\uC5D0 \\uC758\\uD574 \\uC0AD\\uC81C\\uB420 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\",' ']})]})]}),/*#__PURE__*/_jsx(List,{headersName:['제목','작성자','작성일'],children:currentPosts.length>0?currentPosts.map((item,index)=>/*#__PURE__*/_jsxs(RowList,{children:[/*#__PURE__*/_jsx(ColumnList,{children:/*#__PURE__*/_jsx(Link,{to:\"/suggest/PostView/\".concat(item.no),style:{textDecoration:'none'},children:/*#__PURE__*/_jsx(\"div\",{className:\"List_title\",children:item.title})})}),/*#__PURE__*/_jsx(ColumnList,{children:\"\\uC775\\uBA85\"}),/*#__PURE__*/_jsx(ColumnList,{children:item.created_date})]},index)):/*#__PURE__*/_jsx(\"div\",{children:\"\\uAC8C\\uC2DC\\uAE00\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"searchContent_layout\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSearch,className:\"SearchForm\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"searchform_input\",type:\"text\",value:searchKeyword,onChange:e=>setSearchKeyword(e.target.value),placeholder:\"\\uAC80\\uC0C9\\uC5B4\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694\"}),/*#__PURE__*/_jsx(\"button\",{className:\"searchform_button\",type:\"submit\",children:/*#__PURE__*/_jsx(\"img\",{className:\"searchicon\",src:searchicon,alt:\"searchicon\",width:20,height:20})})]}),/*#__PURE__*/_jsx(CreateButton,{nextNo:getNextNo()})]}),/*#__PURE__*/_jsx(\"div\",{className:\"PaginationCustom\",children:/*#__PURE__*/_jsx(PaginationCustom,{currentPage:currentPage,totalPages:Math.ceil(dataList.length/postsPerPage),onPageChange:handlePageChange})})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default Suggest;","map":{"version":3,"names":["React","useState","useEffect","Link","useLocation","axios","TitleBody","List","ColumnList","RowList","CreateButton","PaginationCustom","NavbarTop","Footer","searchicon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Suggest","dataList","setDataList","currentPage","setCurrentPage","searchKeyword","setSearchKeyword","postsPerPage","location","fetchData","keyword","arguments","length","undefined","endpoint","concat","encodeURIComponent","response","get","console","log","data","error","state","newPost","prevDataList","getNextNo","Math","max","map","post","no","indexOfLastPost","indexOfFirstPost","currentPosts","slice","handlePageChange","pageNumber","handleSearch","e","preventDefault","children","className","title","body1","body2","headersName","item","index","to","style","textDecoration","created_date","onSubmit","type","value","onChange","target","placeholder","src","alt","width","height","nextNo","totalPages","ceil","onPageChange"],"sources":["C:/Users/가연/Desktop/Hackathon_real/Hackathon_JJIN/front-end/src/components/suggest/Suggest.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nimport TitleBody from '../notice/element/TitleBody.js';\r\nimport List from '../notice/element/List.js';\r\nimport ColumnList from '../notice/element/ColumnList.js';\r\nimport RowList from '../notice/element/RowList.js';\r\nimport CreateButton from '../notice/element/CreateButton.js';\r\nimport PaginationCustom from '../notice/element/PaginationCustom.js';\r\nimport NavbarTop from '../navbar/NavbarTop.js';\r\nimport Footer from '../Footer.js';\r\n\r\nimport searchicon from '../images/searchicon.png';\r\n\r\nimport './Suggest.css';\r\n\r\nconst Suggest = () => {\r\n  const [dataList, setDataList] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [searchKeyword, setSearchKeyword] = useState('');\r\n  const postsPerPage = 10;\r\n  const location = useLocation();\r\n\r\n  const fetchData = async (keyword = '') => {\r\n    try {\r\n      const endpoint = keyword ? `/suggest/search?keyword=${encodeURIComponent(keyword)}` : '/suggest';\r\n      const response = await axios.get(endpoint);\r\n      console.log('응답 데이터:', response.data);\r\n      setDataList(response.data);\r\n    } catch (error) {\r\n      console.error('There was an error fetching the posts!', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (location.state && location.state.newPost) {\r\n      console.log('새 게시글 추가:', location.state.newPost);\r\n      setDataList((prevDataList) => [location.state.newPost, ...prevDataList]);\r\n    }\r\n  }, [location.state]);\r\n\r\n  const getNextNo = () => {\r\n    return dataList.length > 0 ? Math.max(...dataList.map((post) => post.no)) + 1 : 1;\r\n  };\r\n\r\n  const indexOfLastPost = currentPage * postsPerPage;\r\n  const indexOfFirstPost = indexOfLastPost - postsPerPage;\r\n  const currentPosts = dataList.slice(indexOfFirstPost, indexOfLastPost);\r\n\r\n  const handlePageChange = (pageNumber) => {\r\n    setCurrentPage(pageNumber);\r\n  };\r\n\r\n  const handleSearch = (e) => {\r\n    e.preventDefault();\r\n    fetchData(searchKeyword);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <NavbarTop />\r\n      <div className=\"SuggestAll_layout\">\r\n        <div className=\"SuggestTop_layout\">\r\n          <TitleBody\r\n            title=\"건의사항\"\r\n            body1=\"본 게시판은 동국대학교 학생들의 만족스러운 학교생활을 위해 적극 반영될 예정입니다.\"\r\n            body2=\"동국대학교 학생 여러분들의 자유롭고 다양한 의견을 기다립니다.\"\r\n          />\r\n          <div className=\"graynotice\">\r\n            <div className=\"graynotice1\">*욕설 및 비속어를 사용한 게시물은 관리자에 의해 삭제될 수 있습니다.</div>\r\n            <div className=\"graynotice2\">\r\n              *허위 사실이나 타인의 명예를 훼손하는 내용이 포함된 게시물은 관리자에 의해 삭제될 수 있습니다.{' '}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <List headersName={['제목', '작성자', '작성일']}>\r\n          {currentPosts.length > 0 ? (\r\n            currentPosts.map((item, index) => (\r\n              <RowList key={index}>\r\n                <ColumnList>\r\n                  <Link to={`/suggest/PostView/${item.no}`} style={{ textDecoration: 'none' }}>\r\n                    <div className=\"List_title\">{item.title}</div>\r\n                  </Link>\r\n                </ColumnList>\r\n                <ColumnList>익명</ColumnList>\r\n                <ColumnList>{item.created_date}</ColumnList>\r\n              </RowList>\r\n            ))\r\n          ) : (\r\n            <div>게시글이 없습니다.</div>\r\n          )}\r\n        </List>\r\n        <div className=\"searchContent_layout\">\r\n          <form onSubmit={handleSearch} className=\"SearchForm\">\r\n            <input\r\n              className=\"searchform_input\"\r\n              type=\"text\"\r\n              value={searchKeyword}\r\n              onChange={(e) => setSearchKeyword(e.target.value)}\r\n              placeholder=\"검색어를 입력하세요\"\r\n            />\r\n            <button className=\"searchform_button\" type=\"submit\">\r\n              <img className=\"searchicon\" src={searchicon} alt=\"searchicon\" width={20} height={20} />\r\n            </button>\r\n          </form>\r\n          <CreateButton nextNo={getNextNo()} />\r\n        </div>\r\n        <div className=\"PaginationCustom\">\r\n          <PaginationCustom\r\n            currentPage={currentPage}\r\n            totalPages={Math.ceil(dataList.length / postsPerPage)}\r\n            onPageChange={handlePageChange}\r\n          />\r\n        </div>\r\n      </div>\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Suggest;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}